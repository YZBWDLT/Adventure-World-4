# 冒险小世界：剑之试炼

一张 Minecraft 基岩版 1.21.0 的自定义 PVE 地图

## 作者

一只卑微的量筒
狂野巴豆

**极筑工坊**出品

## 简介

还记得《冒险世界：苏醒》所发生的故事吗？在那一段冒险结束之后，村里又发生了一件不寻常的事情，故事的续写也从此开始……

本地图为冒险世界系列作品中的小插曲，为 PVE 类型，未玩过前作也可以放心体验。同时也欢迎游玩前作《冒险世界：逃离》《冒险世界：苏醒》和《冒险世界：迷失》，点击作者头像打开作品页面即可找到。

本地图制作耗时极长，内容和机制十分完善。拥有精美的建筑；全程无命令方块，使用函数驱动；拥有药水、武器等多种自定义物品；各种怪物都进行了不同程度的修改，更具有趣味性和挑战性；可以单人或多人游玩，动态难度会根据游玩人数变化。

## 更新日志

> 版本号：4.2 - Pre 1

### 单关卡试炼

- 现在单关卡试炼的准备时间由 4 秒延长到了 15 秒，并会在准备阶段给予药水
- #128 现在从主动旁观模式结束全流程后进行单关卡试炼，不再会应用主动旁观的设置了
- #134 现在单关卡试炼在正式开始关卡之前都不再能移动了
- #138 现在在试炼入口调整单关卡试炼的关卡号时，即使退出、重新开始游戏之后也可以保留了
- 修复了玩家在主动旁观模式下退出，并在单关卡试炼下进入仍保持主动旁观的问题
- 修复了单关卡 2-2、2-3、3-2、3-3、3-4 的重生点错误的问题
- 现在玩家在准备过程中退出并重新进入也不再会出现问题了

### 结束结算

- 现在结束结算数据以通关时的数据为准，而不再以该数据的实时数据为准
  - 例如，当通关时有 5 人，那么退出到只剩 1 人时，NPC 的对话和结算数据仍然以 5 人时的数据展现
  - 因此，移除了 Alpha 4.2_02 引入的“无评价”的设定，因为如果玩家在多人情况下完成地图，现在完全不会看到评价
- 现在结束结算数据能够显示多人通关时的玩家人数了
- 撤除了水晶哥的 NPC，换为硫化银
- 撤除了风暴的 NPC，换为橘子
- 新增了 lanos、命令块、海王星、小飞侠、鱼周、王牌、残梦的 NPC
  - 其中小飞侠和王牌目前没有上传皮肤，也没有留言，所以目前显示的内容并非留言
- 更新了制作人名单，新增了 4 页的 Alpha 和 Beta 版本的测试员名单

### 漏洞修复与特性优化

- #129 修复了只有在完成二周目后才能在三周目及之后获取退出试炼物品的问题
- #130 修复了从 10-3（试炼入口）回到 10-2（村庄）后，在村庄死亡会重生到试炼入口的问题
- #131 修复了在 3 人或更多玩家时未能提示谁选择了继续试炼的问题
- #132 修复了 3-1 的剧情中，迷雾未被撤除的问题
- #133 现在能够正确初始化退出重进玩家的旁观信息
- #135 现在退出试炼能够正常使用了
- #136 恢复了 2-1 的彩蛋告示牌内容
- #137 修复了退出后不会修改玩家游戏模式的问题（尤其是单关卡试炼下）
- 修复了在开幕时玩家仍能保持物品的问题
- 修复了在开幕时，玩家重新进入时错误地使部分命令选中全体玩家的问题

### 底层更新

- 将开启单关卡试炼的相关代码从结束剧情的`aw/levels/end/stage3`中分离了出来，现在统一集合到`aw/levels/end/stage4`中
- 将 10-3 的临时变量`settings.temp.level`正式升级为全局变量`settings.level`
- 新增了一个用于查询`settings.level`的值的函数`aw/developer/query/level_settings`
- 新增了一个用于安全移除门的方法`aw/lib/events/remove_door`
- 新增了多个`record`记分板下的变量，用于记录通关时的数据
- 移除了最佳分数的记录`record.bestScore.xxx`
