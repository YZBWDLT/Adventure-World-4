# 冒险小世界：剑之试炼

一张 Minecraft 基岩版 1.21.0 的自定义 PVE 地图

## 作者

一只卑微的量筒
狂野巴豆

**极筑工坊**出品

## 简介

还记得《冒险世界：苏醒》所发生的故事吗？在那一段冒险结束之后，村里又发生了一件不寻常的事情，故事的续写也从此开始……

本地图为冒险世界系列作品中的小插曲，为 PVE 类型，未玩过前作也可以放心体验。同时也欢迎游玩前作《冒险世界：逃离》《冒险世界：苏醒》和《冒险世界：迷失》，点击作者头像打开作品页面即可找到。

本地图制作耗时极长，内容和机制十分完善。拥有精美的建筑；全程无命令方块，使用函数驱动；拥有药水、武器等多种自定义物品；各种怪物都进行了不同程度的修改，更具有趣味性和挑战性；可以单人或多人游玩，动态难度会根据游玩人数变化。

## 更新日志

> 版本号：Beta 4.2_02

### 退出试炼

- 现在在二周目后可以退出试炼了！
- 右键（手机长按）使用退出试炼物品可以进入暂停房间
  - 是一个红色箭头物品，取自《30 种死法 2》
  - 会在二周目后给予此物品
  - 必须在试炼状态下、非关卡状态下才能使用此物品
  - 此外，有些特殊情况也不能使用此物品
- 在暂停状态下，试炼会暂停计时、播放剑之试炼入口的音乐、无法使用御风珠和弓箭、也无法进入关卡
- 多人模式下，只需要一名玩家使用该物品即可进入暂停状态
  - 如果有玩家滥用退出试炼导致游戏无法正常进行，也可以使用`/tag (玩家名字) add cannotQuit`阻止该玩家使用此物品
- 在暂停房间可以选择继续试炼或退出试炼
  - 继续试炼仅需一名玩家同意即可继续
  - 而退出试炼则必须所有玩家选择退出方可退出

### 主动旁观

- 现在在多人模式下可以选择主动旁观了！
- 多人模式右键（手机长按）使用主动旁观物品可以启用主动旁观
  - 该物品长得像 QQ 中的鬼魂表情，还是很可爱的哦
  - 必须在试炼状态下、非关卡状态下才能使用此物品
- 启用或关闭了主动旁观的玩家，会自动进行播报
- 如果所有玩家都启用主动旁观，进入关卡会直接失败
  - 因此，如果所有玩家都启用，会在聊天框弹出来一个红色的警告，警告所有玩家
- 处于主动旁观模式下的玩家，进入关卡后会自动变成旁观模式，且在关卡内不会“复活”
- 当游戏内只剩余 1 名玩家后，主动旁观机制会立刻失效，物品会被清除，且主动旁观状态会立刻解除

### 特性优化与漏洞修复

- 彻底移除了在 4.0 时期添加的怪物生成粒子
- #68 再次修复了其他玩家可能会被关在外面的问题  
  作者注：*经过实测，现在能够较好地处理意外被关在外面的问题，比如关门时被门挤出去。然而对于网络较差的玩家，在他们进门的一瞬间就立刻跑出还是有可能无法捕捉。我们已经尽了最大努力解决这个问题，目前已经是最优解了。此外，被挤出去的玩家在往门的方向走时也仍然可以被传送回来。*
- 同时，修复了玩家可能会钻空子躲避各关门口检测区域的问题
- 现在剧情模式下，结束后从试炼入口回到村庄会再次显示剧情模式独有的 NPC 了

### 底层更新

- 新增变量`data.allowQuit`，代表当前是否启用退出，`0`为禁用，`1`为启用
- 新增变量`data.pausing`，代表是否正在暂停游戏，`0`为未暂停，`1`为暂停
- 将标签型变量`spectator`升级为记分板变量`spectator.@s`，并添加了状态`2`为启用主动旁观
